<h1>Part 1 - Setup</h1>
<blockquote>
<p><em>I like to think that most things can be achieved. Whatever you have in your head you can probably pull off with code as long as it's possible within the constraints of the universe. It's just a matter of time...and money...and attention.</em><br>
<em><strong>Tom Preston-Werner - <a href="https://www.fullstackradio.com/episodes/138">Full Stack Radio 138</a></strong></em></p>
</blockquote>
<table>
<thead>
<tr>
<th>Introduction</th>
<th>Tutorial</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://dev.to/ajcwebdev/redwood-1d46">I - Redwood Philosophies</a></td>
<td>Part 1 - Setup</td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/full-stack-react-1ihi">II - Full Stack React</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-2-44ph">Part 2 - Routes</a></td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/a-short-history-of-the-jamstack-3lk7">III - Jamstack</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-3-5ao5">Part 3 - Prisma</a></td>
</tr>
<tr>
<td><a href="https://ajcwebdev.substack.com/p/42-a-short-history-of-serverless">IV - Serverless</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-4-2m0g">Part 4 - CRUD</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-5-2ol4">Part 5 - Contact</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-6-a25">Part 6 - GraphQL</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-7-22b0">Part 7 - Deploy</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-8-3pjc">Part 8 - Auth</a></td>
</tr>
</tbody>
</table>
<p><a href="https://dev.to/ajcwebdev/redwood-1d46">Redwood</a> is an opinionated, <a href="https://dev.to/ajcwebdev/full-stack-react-1ihi">full-stack</a>, <a href="https://dev.to/ajcwebdev/fauna-3mnm">serverless</a> web application framework for building and deploying <a href="https://dev.to/ajcwebdev/a-short-history-of-javascript-4lho">JAMstack</a> applications.</p>
<p>I've structured this series to reflect the actual process I go through when experimenting with a new framework for the first time. I stick to the path laid out in the official docs tutorial, but as I go through each step I reference the documentation for each command or component. This helps me build a mental model of the framework instead of just copy-pasting commands and code snippets.</p>
<p>I will start at the very beginning and assume no prior knowledge of Redwood although I do assume a basic knowledge of React. But I'm talking really basic, if you know what a component is, have written at least a dozen lines of JSX, and have generated at least one project with <a href="https://reactjs.org/docs/create-a-new-react-app.html">create-react-app</a> then you'll be fine.</p>
<p>If none of that made sense you should click the link to the create-react-app docs and work through those before reading this. This series is geared towards someone who has at least a few months experience in a coding bootcamp or on the job, around the point where they start getting comfortable with the basic workflows of git, npm, the terminal, and simple HTML websites.</p>
<p>You'll need <code>yarn</code> for this tutorial which has slight differences from <code>npm</code>. If you've never used <code>yarn</code> you can find installation instructions <a href="https://yarnpkg.com/getting-started/install">here</a> or just enter <code>yarn install</code> into your terminal.</p>
<h1>1.1 <code>yarn create redwood-app</code></h1>
<p>The first step is to install Redwood globally to my system and generate our first project. We'll accomplish both of these with the <code>yarn create</code> command.</p>
<pre><code>yarn create redwood-app ./ajcwebdev
</code></pre>
<p>This will create a folder called <code>ajcwebdev</code> that holds all the code that will be generated. You can call your project anything you want, just make sure to keep using your name anytime I use <code>ajcwebdev</code> in a terminal command.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/lxd8utprctvlo5m3qghu.jpg" alt="01-yarn-creating-redwood-app"></p>
<h1>1.2 <code>yarn redwood dev</code></h1>
<p><code>yarn rw</code> is the same as <code>yarn redwood</code> and can be used to save a few keystrokes if you want. We'll <code>cd</code> into that folder and then start our development server.</p>
<pre><code>cd ajcwebdev
yarn rw dev
</code></pre>
<p><code>yarn redwood dev</code> can be used to run a development server for the Redwood server, Webpack server or your database &quot;server&quot; which isn't exactly a server.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/dgctwlag1lzlp5t9x006.jpg" alt="02-yarn-redwood-dev"></p>
<p>Don't worry about any of that for now but that'll be important in later articles.</p>
<p>Our server is now running on localhost:8910 (a mnemonic to help remember that is thinking of counting 8-9-10). Open a web browser and enter localhost:8910 into the address bar. If you've done everything correctly up to this point you'll see the Redwood starter page.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/o2r8f3spa2n3kk7cxv04.jpg" alt="03-redwood-starter-page"></p>
<p>WHOOPS, it worked, we're up and running.</p>
<p>Don't worry too much about what it says about custom routes, we'll talk about that in the next article. Lets look at the file structure that has been created for us.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/xvlr8i9s57466ew5h582.jpg" alt="04-project-structure"></p>
<p>Don't worry about most of this, for the purpose of this article we'll only be working in the <code>web</code> folder. Since we are responsible developers the first thing we do is go to the README.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/3l125cxaqyia1p7niyg7.jpg" alt="05-README"></p>
<p>The README provides instructions for the commands that we used earlier to get our application set up, <code>yarn install</code> and <code>yarn redwood dev</code>. It also mentions something you may have noticed earlier, we have something else running on <code>localhost:8911</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/blxty5qybhlafl59qf39.jpg" alt="06-serverless-functions"></p>
<p>Once again, don't worry if that doesn't make sense since it's outside the scope of this article.</p>
<p>In Redwood our frontend code is contained in the <code>web</code> folder and our backend code is contained in the <code>api</code> folder. Lets now look at our <code>web</code> folder.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/6vqn2so0et6e0sma03gx.jpg" alt="07-project-structure-web"></p>
<p>Redwood structures the <code>web</code> folder a bit like create-react-app projects with a <code>public</code> and <code>src</code> folder.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/t13atdndtlae318ercnu.jpg" alt="08-public-src-directories"></p>
<h1>1.3 <code>redwood generate page</code></h1>
<p>With our application now set up we can start creating pages. We'll use the <code>generate page</code> command to create a home page and a folder to hold that page.</p>
<pre><code>yarn rw g page home /
</code></pre>
<p>This created files for our home page and another file for testing that page.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/hzvo9llg8f37bjbji18x.jpg" alt="09-yarn-redwood-generating-HomePage"></p>
<p>Since I only entered <code>home</code> it will use that to name both the folder and the component file but you can specify each if necessary.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/t1624rsar2mklwuvr4el.jpg" alt="10-project-structure-web-src-pages"></p>
<p>Return to your browser and you will now see a new page instead of the landing page.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/t17uzic0cqdvnccuc9ws.jpg" alt="11-HomePage"></p>
<p>Let's look at the code that was generated for this page. It's a component called <code>HomePage</code> that returns a <code>&lt;div&gt;</code> with a header <code>&lt;h1&gt;</code> and a paragraph tag <code>&lt;p&gt;</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/hprdsiaqol1834ui38i8.jpg" alt="12-HomePage-component"></p>
<p>This should be pretty self-explanatory if you have experience with React. If this doesn't look familiar it would be helpful to spend a little time studying React by itself before jumping into Redwood.</p>
<p>Now we'll edit the page and see what happens.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/xwkypgowpocigb25x83o.jpg" alt="13-HomePage-edit"></p>
<p>Feel free to include links to your own social accounts. With those changes made return to your browser.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/an4t8t1uk84208zszmh0.jpg" alt="14-HomePage-new"></p>
<p>Now we are going to generate our <code>about</code> page.</p>
<pre><code>yarn rw g page about
</code></pre>
<p>Like before we created an <code>AboutPage</code> component inside of an <code>AboutPage</code> folder along with a file for testing that page.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/jdlvagogp4v0w0sxqw6z.jpg" alt="15-yarn-redwood-generating-AboutPage"></p>
<p>We don't yet have a link to get to it from the home page, so for now you'll need to enter the route manually into your browser address bar by adding <code>/about</code> after <code>localhost:8910</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/1xpgo6slth77gh2kx69g.jpg" alt="16-AboutPage"></p>
<p>Open up the code and it's another React component much like the last! Components are kind of a big deal in React.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/16huzchu75d19onjqu5c.jpg" alt="17-AboutPage-component"></p>
<p>We can also edit this page just like the <code>home</code> page.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/74gtu85dnjnrsjyg9hbv.jpg" alt="18-AboutPage-edit"></p>
<p>With those changes return to your browser.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/0jb47h2b9nh6ufmgeipn.jpg" alt="19-AboutPage-new"></p>
<p>We can also see these files have been added to our <code>src</code> folder.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/sui0vqkfd50f5oqini8u.jpg" alt="20-project-structure-web-new"></p>
<p>In the <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-2-44ph">next part</a> we'll take a look at Redwood's router and create links for the pages we created.</p>
<h1>Part 2 - Routes</h1>
<blockquote>
<p><em>We basically wrote the tutorial the way that we wanted the code to work and then we made the tutorial work by writing the code. As opposed to <a href="https://tom.preston-werner.com/2010/08/23/readme-driven-development.html">Readme Driven Development</a> which I've written about this is tutorial driven development.</em><br>
<em><strong>Tom Preston-Werner - <a href="https://www.fullstackradio.com/episodes/138">Full Stack Radio 138</a></strong></em></p>
</blockquote>
<table>
<thead>
<tr>
<th>Introduction</th>
<th>Tutorial</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://dev.to/ajcwebdev/redwood-1d46">I - Redwood Philosophies</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-1017">Part 1 - Setup</a></td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/full-stack-react-1ihi">II - Full Stack React</a></td>
<td>Part 2 - Routes</td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/a-short-history-of-the-jamstack-3lk7">III - Jamstack</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-3-5ao5">Part 3 - Prisma</a></td>
</tr>
<tr>
<td><a href="https://ajcwebdev.substack.com/p/42-a-short-history-of-serverless">IV - Serverless</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-4-2m0g">Part 4 - CRUD</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-5-2ol4">Part 5 - Contact</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-6-a25">Part 6 - GraphQL</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-7-22b0">Part 7 - Deploy</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-8-3pjc">Part 8 - Auth</a></td>
</tr>
</tbody>
</table>
<p>In <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-1017">part 1</a> we installed and created our first RedwoodJS application. We used:</p>
<ul>
<li><code>yarn create redwood-app</code> to generate the initial app</li>
<li><code>redwood generate page</code> to create:
<ul>
<li>A <code>HomePage</code> folder containing a <code>HomePage</code> file containing a <code>HomePage</code> component</li>
<li>An <code>AboutPage</code> folder containing an <code>AboutPage</code> file containing an <code>AboutPage</code> component.</li>
</ul>
</li>
</ul>
<p><strong>Quick tip</strong>: If at any point you're having trouble remembering commands just enter:</p>
<pre><code>yarn rw --help
</code></pre>
<p>You'll get a quick reminder of all the commands.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/7k2w22h54b19dtdaehvp.jpg" alt="01-redwood-help"></p>
<p>We were able to navigate between the different pages in our browser by entering <code>/about</code> for the about page or a slash (<code>/</code>) for the home page. Depending on your experience with React this may have been surprising to you.</p>
<p>If you've worked on routing in React before you know that to achieve this there needs to be an entirely different package imported containing the router and then your routes need to be wrapped in a <code>&lt;BrowserRouter&gt;</code> or <code>&lt;Router&gt;</code> component to give the router access to your pages. Well guess what.....</p>
<h1>2.1 <code>Routes.js</code></h1>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/6754hyawsc4nhbedcokc.jpg" alt="02-web-src-routes"></p>
<p>In our <code>src</code> folder we have a file called <code>Routes.js</code>. When we used the CLI to generate <code>HomePage</code> and <code>AboutPage</code> we also created these routes.</p>
<ul>
<li>All Page components from 'src/pages` are auto-imported</li>
<li>Nested directories are supported, and should be uppercase</li>
<li>Each subdirectory will be prepended onto the component name</li>
</ul>
<p>Examples:</p>
<p><code>src/pages/HomePage/HomePage.js</code>         -&gt; <code>HomePage</code>
<code>src/pages/Admin/BooksPage/BooksPage.js</code> -&gt; <code>AdminBooksPage</code></p>
<h1>2.2 <code>index.js</code></h1>
<p>The other file in our <code>src</code> folder is <code>index.js</code> which is our root component that ReactDOM renders to the screen.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/n4wv8nl5o8p0g78pw5y9.jpg" alt="03-web-src-index"></p>
<p>In React all <a href="https://reactjs.org/blog/2013/06/05/why-react.html">components are composable</a> which encourages the creation of reusable UI components that present data that changes over time. Traditionally, web application UIs were built using templates or HTML directives.</p>
<p>But in React you always have a root component that contains other components and those components may contain other components. If that's a little confusing just give it some time and it'll start to click as this series goes on.</p>
<p>The important take away is:</p>
<ol>
<li>Your routes and thus all the website's pages are contained within the <code>&lt;RedwoodProvider&gt;</code> tags (we'll talk about these more once we get to state management).</li>
<li>The provider itself is contained within the <code>&lt;FatalErrorBoundary&gt;</code> component that is taking in <code>&lt;FatalErrorPage&gt;</code> as a prop which defaults your website to an error page if all else fails.</li>
</ol>
<h1>2.3 <code>Link</code></h1>
<p>When it comes to routing, matching URLs to Pages is only half the equation. The other half is generating links to your pages. Lets add a link to our page so we can navigate between our home page and about page by clicking on the page. We'll need to add 3 things to our <code>HomePage</code> file:</p>
<ol>
<li>Import <code>Link</code> and <code>routes</code> from <code>@redwoodjs/router</code></li>
<li><code>&lt;Link to={}&gt;About&lt;/Link&gt;</code></li>
<li>Pass into the Link component <code>routes.about()</code></li>
</ol>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/68bt581387fmy95u10wx.jpg" alt="04-HomePage-link-to-about-page"></p>
<p>You use a <code>Link</code> to generate a link to one of your routes. The <code>routes</code> object can access URL generators for any of your routes.</p>
<p>We call the functions on the <code>routes</code> object <em><strong>named route functions</strong></em>. They are named after whatever you specify in the <code>name</code> prop of the <code>Route</code>.</p>
<p>Return to your browser to see the changes to your home page.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/3yhf1exg9aiyyqn2mpvt.jpg" alt="05-home-page-with-about-link"></p>
<p>We now have a link we can click to navigate to our about page from our home page. Click the link and you will be brought to your about page.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/myah900v6eecz6agqcgn.jpg" alt="06-about-page"></p>
<p>We also want to be able to navigate back to our home page once we are on our about page. We'll do the same three steps from earlier but with a different prop:</p>
<ol>
<li>Import <code>Link</code> and <code>routes</code> from <code>@redwoodjs/router</code></li>
<li><code>&lt;Link to={}&gt;About&lt;/Link&gt;</code></li>
<li>Pass into the Link component <code>routes.home()</code></li>
</ol>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/eh6oa070pmpwkt8oyl6n.jpg" alt="07-AboutPage-component"></p>
<p>Everything is exactly the same except we pass in <code>routes.home()</code> instead of <code>routes.about()</code> because we want to navigate to our home page this time. Take a look at your about page.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/jxmx68c2mwply6jok8m1.jpg" alt="08-about-page-with-return-home-link"></p>
<p>There is now a link that will take you back to the home page when clicked. If we open up our editor and look at our working tree we can see the changes we added.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/tdzhcl0quo7y4fihhr99.jpg" alt="09-HomePage-working-tree"></p>
<p>You can only see this if you're working with git and regularly committing and pushing your code which is highly recommended.</p>
<h1>2.4 <code>redwood generate layout</code></h1>
<p>You've probably been on a website before. Usually there's some kind of navigation bar at the top and footer at the bottom that stays consistent as you travel around the website.</p>
<p>Redwood's folder structure is designed to make this really easy.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/fhw492184t7gqkysiuci.jpg" alt="10-layouts"></p>
<p>Remember what I said before about everything being a component containing other components? That's the middle part. Pages contain components. Your layout will contain all of your pages.</p>
<p>We can generate a file for our layout with <code>yarn redwood generate layout</code> or <code>yarn rw g layout</code>. This will work a lot like the <code>generate page</code> commands we've done earlier.</p>
<pre><code>yarn rw g layout blog
</code></pre>
<p>The only difference is it will create a folder inside <code>./web/src/layouts</code> this time instead of <code>./web/src/pages</code> because we are generating a layout and not a page.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/k52wh8jgfhbi01ltvjz3.jpg" alt="11-generating-BlogLayout"></p>
<p>That makes sense. Take a look at your layouts folder and you'll see a file called <code>BlogLayout.js</code> and another called <code>BlogLayout.test.js</code> for testing.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ksa3fcmkmau4ts0ahs1n.jpg" alt="12-BlogLayout-folder"></p>
<h1>2.5 <code>BlogLayout</code></h1>
<p>Lets look at our <code>BlogLayout</code> component</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/h17idf96oqi2ssfjalgd.jpg" alt="13-layout-BlogLayout"></p>
<p><code>children</code> is where the magic will happen. Any page content given to the layout will be rendered here.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/3jnvodfeel3xcod1levn.jpg" alt="14-BlogLayout-component"></p>
<p>Back to HomePage and AboutPage, we add a <BlogLayout> wrapper and now they're back to focusing on the content they care about</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/8u258ya82phsnkb83087.jpg" alt="15-HomePage-import-BlogLayout"></p>
<p>We can remove the import for Link and routes from HomePage since those are in the Layout instead:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/sidrxk8wibgkixvltw7w.jpg" alt="16-AboutPage-import-BlogLayout"></p>
<p>Notice that the import statement uses <code>src/layouts/BlogLayout</code> and not <code>../src/layouts/BlogLayout</code> or <code>./src/layouts/BlogLayout</code>.</p>
<ul>
<li>This is a convenience feature so you don't need to worry about the nesting of your folders.</li>
<li><code>src</code> is an alias to the <code>src</code> path in the current workspace. If you're working in web then <code>src</code> points to <code>web/src</code> and in <code>api</code> it points to <code>api/src</code>.</li>
</ul>
<p>If we look at our home pages now it should look and behave the same way as before except we have turned our title in the <code>&lt;h1&gt;</code> tag into a home page link.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/acyh7mrt05eg63n3g40f.jpg" alt="17-home-page-with-BlogLayout"></p>
<p>Our about page is the same except we have removed the link to return home since we can now click the title.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/v5cpyykmpar9yoc1qikq.jpg" alt="18-about-page-with-BlogLayout"></p>
<p>In the <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-3-5ao5">next part</a> we'll start working with a database and learn to create, retrieve, update, and destroy blog posts.</p>
<h1>Part 3 - Prisma</h1>
<blockquote>
<p><em>What I wanted was to codify and standardize the types of things that we were already doing and just remove choice and remove friction and just give people the ability to sit down and say, &quot;all right I know these technologies already, I have the prerequisite knowledge to do this.&quot;</em><br>
<em><strong>Tom Preston-Werner - <a href="https://www.fullstackradio.com/episodes/138">Full Stack Radio 138</a></strong></em></p>
</blockquote>
<table>
<thead>
<tr>
<th>Introduction</th>
<th>Tutorial</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://dev.to/ajcwebdev/redwood-1d46">I - Redwood Philosophies</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-1017">Part 1 - Setup</a></td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/full-stack-react-1ihi">II - Full Stack React</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-2-44ph">Part 2 - Routes</a></td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/a-short-history-of-the-jamstack-3lk7">III - Jamstack</a></td>
<td>Part 3 - Prisma</td>
</tr>
<tr>
<td><a href="https://ajcwebdev.substack.com/p/42-a-short-history-of-serverless">IV - Serverless</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-4-2m0g">Part 4 - CRUD</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-5-2ol4">Part 5 - Contact</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-6-a25">Part 6 - GraphQL</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-7-22b0">Part 7 - Deploy</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-8-3pjc">Part 8 - Auth</a></td>
</tr>
</tbody>
</table>
<p>In <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-1017">part 1</a> we installed and created our first RedwoodJS application and in <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-2-44ph">part 2</a> we created links to our different page routes and a reusable layout for our site.</p>
<p>In this part we'll get our database up and running and learn to create, retrieve, update, and destroy blog posts.</p>
<p>So far we've been working in the <code>web</code> folder. In our <code>api</code> folder there is a folder called <code>prisma</code> for our Prisma schema.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/hct10louzlva7xdmtk1l.jpg" alt="01-project-structure-api"></p>
<p>Prisma is a <a href="https://www.prisma.io/docs/understand-prisma/why-prisma">query builder</a> that provides a type-safe API for submitting database queries which return JavaScript objects.</p>
<p>It is similar to an ORM and was selected by Tom in the hopes of emulating <a href="https://guides.rubyonrails.org/active_record_basics.html">Active Record's</a> role in Ruby on Rails.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/4dqvsgehyumpz7mtqffd.jpg" alt="02-prisma-folder"></p>
<h1>3.1 <code>schema.prisma</code></h1>
<p>The Prisma schema file is the main configuration file for your Prisma setup. It is typically called <code>schema.prisma</code></p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/begc53wcy4jwy9hdtku5.jpg" alt="03-schema-prisma"></p>
<p>In order to set up Prisma Client, you need a Prisma schema file with:</p>
<ul>
<li>your database connection</li>
<li>the Prisma Client <code>generator</code></li>
<li>at least one <code>model</code></li>
</ul>
<p>We'll delete the default <code>UserExample</code> model and make a <code>Post</code> model with an <code>id</code>, <code>title</code>, <code>body</code>, and <code>createdAt</code> time.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/5spibfw09dz3gabmb2uy.jpg" alt="04-schema-prisma-Post-model"></p>
<h1>3.2 <code>seeds.js</code></h1>
<p><code>seeds.js</code> is used to populate your database with any data that needs to exist for your app to run at all (maybe an admin user or site configuration).</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/y9b86h5xm8tlhc3uztmf.jpg" alt="05-seeds"></p>
<h1>3.3 <code>redwood db save</code></h1>
<p>Running <code>yarn rw db save</code> generates the folders and files necessary to create a new migration.</p>
<pre><code>yarn rw db save
</code></pre>
<p>This will create our database migration.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/kns0ie08g1wxgvw68wys.jpg" alt="06-creating-database-migration"></p>
<p>It is named <code>migration</code> by default.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/yrp3vadsltwr9i4ri6rd.jpg" alt="07-new-datamodel"></p>
<ul>
<li><strong>Data sources</strong> specify the details of the data sources Prisma should connect to such as a PostgreSQL database</li>
<li><strong>Generators</strong> specify what clients should be generated such as the Prisma Client</li>
<li><strong>Data model definition</strong> specifies your application models and their relations</li>
</ul>
<h1>3.4 <code>migrations</code></h1>
<p>A migration defines the steps necessary to update your current schema.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/susq1wpxa9371jkgpkkr.jpg" alt="08-created-your-migration"></p>
<p>The <code>migrate</code> command creates and manages database migrations. It can be used to create, apply, and rollback database schema updates in a controlled manner.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/hvwoo99bat2dkuye5fc4.jpg" alt="09-api-folder-structure"></p>
<p>The <code>README</code> contains a human-readable description of the migration.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/talhgpjwjqmngiv0xg0f.jpg" alt="10-database-migration-initialize-database"></p>
<p>It includes metadata like:</p>
<ul>
<li>when the migration was created and by who</li>
<li>a list of the actual migration changes</li>
<li>a diff of the changes that are made to the <code>schema.prisma</code> file</li>
</ul>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/90eygy8pvs57i720hxsj.jpg" alt="11-database-changes"></p>
<p><code>schema.prisma</code> in the migration folder is the schema that will be created if the migration is applied to the project.</p>
<h1>3.5 <code>steps.json</code></h1>
<p><code>steps.json</code> is an alternative representation of the migration steps that will be applied.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/9lc0xu2vgb9tq6rkiqnv.jpg" alt="12-steps-json"></p>
<p>Steps are actions that resolve into zero or more database commands. Steps generically describe models, fields and relationships, so they can be easily translated to datasource-specific migration commands.</p>
<h1>3.6 <code>redwood db up</code></h1>
<p>This command generates the Prisma client and applies migrations. The database is migrated up to a specific state.</p>
<pre><code>yarn rw db up
</code></pre>
<p>This will run the commands against the database to create the changes we need. This results in a new table called <code>Post</code> with the fields we defined.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/cic7sdqzmmj8gr0bza46.jpg" alt="13-migrate-database-up-started"></p>
<p>The following <code>datasource</code> defines a SQLite database.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/41bddbn17w3erd7edrsu.jpg" alt="14-datamodel-that-will-initialize-the-db"></p>
<p>After checking for data loss the database actions will be executed. In this instance we just have a single <code>CreateTable</code> statement for our Post model.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/gptm3u9nng2ifvmreg59.jpg" alt="15-database-migration"></p>
<p>The Prisma client will then be generated.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/927wf7o2rs6nn3yhc7ys.jpg" alt="16-generating-prisma-client"></p>
<h1>3.7 <code>redwood generate scaffold</code></h1>
<p>A scaffold quickly creates a CRUD interface for a model by generating all the necessary files and corresponding routes.</p>
<pre><code>yarn rw g scaffold post
</code></pre>
<p>This will generate pages, SDL's, services, layouts, cells, and components based on a given database schema Model. Look at all the stuff I'm not doing!</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/bbjsp27lv4jhaap2xizc.jpg" alt="17-generating-scaffold-files"></p>
<p>Open the browser and enter <code>localhost:8910/posts</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/lhz94ndsl9olzxe9fa43.jpg" alt="18-posts-page"></p>
<p>We have a new page called Posts with a button to create a new post. If we click the new post button we are given an input form with fields for title and body.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/wzd7fuj7095skqrvcjc8.jpg" alt="19-new-post-form"></p>
<p>We were taken to a new route, <code>/posts/new</code>. Let's create a blog post about everyone's favorite dinosaur.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/4232p8zg5u8p3lhrumlc.jpg" alt="20-new-deno-post"></p>
<p>If we click the save button we are brought back to the posts page.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/txd7ni7eggb7pmw1tdtm.jpg" alt="21-deno-post-created"></p>
<p>We now have a table with our first post.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/hw56jz0iedg3lzmwfzh6.jpg" alt="22-deno-post-edit"></p>
<p>When we click the edit button we are taken to a route for the individual post that we want to edit. Each post has a unique id.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ba7hs3vyci8bus9w9t6o.jpg" alt="23-deno-post-edited"></p>
<p>The title has now been changed from <code>01-deno</code> to <code>01-deno-edit</code>. Now we'll create another post.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/n6n86mvxjeyjgmj2kxzx.jpg" alt="24-will-delete-post"></p>
<p>If we click the delete button we will be given a warning.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/8129rzy897ydxzo9s4wi.jpg" alt="25-delete-post-warning"></p>
<p>Click ok to confirm and you'll receive a message saying your post has been deleted.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/81z536fmmkfdtz241ijd.jpg" alt="26-post-deleted"></p>
<p>Lets add another blog post:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/lt8ao1j6n93ntb0jlevm.jpg" alt="27-fauna-post"></p>
<p>And one more:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/b22d01flnjys1nh355zs.jpg" alt="28-next-post"></p>
<p>If we make more posts they will start on the id after the deleted item. We already had an id 2. You can't call something else id 2, that would make your database a liar.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/5z5ecpynu0qhkm4jo62y.jpg" alt="29-all-posts"></p>
<p>In the <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-4-2m0g">next part</a> we'll look at the code that powers this functionality and learn about <a href="https://redwoodjs.com/tutorial/cells">Cells</a>. We'll also set up our frontend to query data from our backend to render a list of our blog posts to the front page.</p>
<h1>Part 4 - CRUD</h1>
<blockquote>
<p><em>What I’ve experienced and what I know many people have experienced learning React and getting into this is that path right now is very, very, very, very, very long. And hard. And horrible.</em><br>
<em><strong>Tom Preston-Werner - <a href="https://www.fullstackradio.com/episodes/138">Full Stack Radio 138</a></strong></em></p>
</blockquote>
<table>
<thead>
<tr>
<th>Introduction</th>
<th>Tutorial</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://dev.to/ajcwebdev/redwood-1d46">I - Redwood Philosophies</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-1017">Part 1 - Setup</a></td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/full-stack-react-1ihi">II - Full Stack React</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-2-44ph">Part 2 - Routes</a></td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/a-short-history-of-the-jamstack-3lk7">III - Jamstack</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-3-5ao5">Part 3 - Prisma</a></td>
</tr>
<tr>
<td><a href="https://ajcwebdev.substack.com/p/42-a-short-history-of-serverless">IV - Serverless</a></td>
<td>Part 4 - CRUD</td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-5-2ol4">Part 5 - Contact</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-6-a25">Part 6 - GraphQL</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-7-22b0">Part 7 - Deploy</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-8-3pjc">Part 8 - Auth</a></td>
</tr>
</tbody>
</table>
<p>In <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-1017">part 1</a> we installed and created our first RedwoodJS application, in <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-2-44ph">part 2</a> we created links to our different page routes and a reusable layout for our site, and in <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-3-5ao5">part 3</a> we got our database up and running and learned to create, retrieve, update, and destroy blog posts.</p>
<p>In this part we'll look at all the code that was generated that allowed us to perform our CRUD operations on the blog posts. We'll also set up our frontend to query data from our backend to render a list of our blog posts to the front page. If you've never worked with <a href="https://www.howtographql.com/">GraphQL</a> or serverless functions like <a href="https://www.serverless.com/aws-lambda/">Lambda</a> then some of the concepts in this part may be new.</p>
<p>If you want to learn more I have a post about <a href="https://dev.to/ajcwebdev/a-short-history-of-graphql-20nb">the history of GraphQL, current projects, and resources</a>.</p>
<h1>4.1 <code>api/src</code></h1>
<p>We've seen the <code>prisma</code> folder under <code>api</code>, now we'll look at the <code>src</code> folder containing our GraphQL code. Redwood comes with GraphQL integration built in to make it easy to get our client talking to our serverless functions.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/p4fn5syh1i8ruaknq2mx.jpg" alt="01-api-src-folder"></p>
<h1>4.2 <code>graphql.js</code></h1>
<p>The <code>functions</code> folder will contain any lambda functions your app needs in addition to the <code>graphql.js</code> file auto-generated by Redwood. This file is required to use the GraphQL API.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/vv2tq8i55o013gk6ojqn.jpg" alt="03-api-src-functions-graphql"></p>
<p>We will be working more with the schema definition language and our services so you don't need to worry too much about what's going on in this file.</p>
<p>I still have no idea what the heck this thing is doing, all I know is it's doing some <a href="https://www.apollographql.com/docs/apollo-server/">Apollo stuff</a>. See <a href="https://www.npmjs.com/package/@redwoodjs/api">these docs</a> for further explanation.</p>
<h1>4.3 <code>posts.sdl.js</code></h1>
<p><code>graphql</code> contains your GraphQL schema. The files will end in <code>.sdl.js</code>. GraphQL schemas for a service are specified using the GraphQL SDL (<a href="https://graphql.org/learn/schema/">schema definition language</a>) which defines the API interface for the client.</p>
<p>Our <code>schema</code> has five object types each with their own fields and types.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/5o4we1jhx17lh4j8efmz.jpg" alt="05-api-src-graphql-posts-sdl"></p>
<h3><code>Post</code> - A blog post</h3>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/4kay4muxjejve35nib3u.jpg" alt="06-api-src-graphql-posts-sdl-Post"></p>
<h3><code>Query</code> - A query that retrieves either:</h3>
<ul>
<li>multiple posts in an array (line 12)</li>
<li>a single post with an <code>id</code> (line 13)</li>
</ul>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/1zvdg4j316xsj25etds9.jpg" alt="07-api-src-graphql-posts-sdl-Query"></p>
<h3><code>CreatePostInput</code> - <code>title</code> and <code>body</code> input of new post</h3>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/qc5tl58xc297sii3m5xf.jpg" alt="08-api-src-graphql-posts-sdl-CreatePostInput"></p>
<h3><code>UpdatePostInput</code> - <code>title</code> and <code>body</code> input of updated post</h3>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/7fvwnfwnk7ertm6hnwtb.jpg" alt="09-api-src-graphql-posts-sdl-UpdatePostInput"></p>
<h3><code>Mutation</code> - Create, update, or delete post</h3>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ptzrabxzayuj3xvfledx.jpg" alt="10-api-src-graphql-posts-sdl-Mutation"></p>
<p><code>createPost</code></p>
<ul>
<li>Takes <code>title</code> and <code>body</code> from <code>CreatePostInput</code></li>
<li>Creates a <code>Post</code></li>
</ul>
<p><code>updatePost</code></p>
<ul>
<li>Takes <code>title</code> and <code>body</code> from <code>UpdatePostInput</code></li>
<li>Takes <code>id</code> of the updated <code>Post</code></li>
</ul>
<p><code>deletePost</code></p>
<ul>
<li>Takes <code>id</code> of the deleted <code>Post</code></li>
</ul>
<h1>4.4 <code>db.js</code></h1>
<p><code>lib</code> contains one file, <code>db.js</code>, which instantiates the Prisma database client. You can use this folder for other code related to the API side that doesn't fit in functions or services.</p>
<p><a href="https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-client">Prisma Client</a> is an auto-generated and type-safe query builder that's tailored to your data.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ay5ibk7uzeh0rz85pc8a.jpg" alt="12-api-src-lib-db"></p>
<h1>4.5 <code>posts.js</code></h1>
<p><code>services</code> contain business logic related to your data. A service implements the logic of talking to the third-party API.</p>
<p>This is where your code for querying or mutating data with GraphQL ends up. The difference is it's in a format that's reusable in other places in your application.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/5875tb982w1poimunt5t.jpg" alt="14-api-src-services-posts"></p>
<p>Redwood will automatically import and map resolvers from the <code>services</code> file onto your SDL. You write resolvers in a way that makes them easy to call as regular functions from other <a href="https://graphql.org/learn/execution/">resolvers</a> or <code>services</code>.</p>
<p>Redwood will look in <code>api/src/services/posts/posts.js</code> for the following five resolvers:</p>
<h2><code>posts</code></h2>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/d9us71jk32gdm3607r28.jpg" alt="14-1-api-src-services-posts-posts"></p>
<h2><code>post</code></h2>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/5itfxp1tf66h8ylll6az.jpg" alt="14-2-api-src-services-posts-post"></p>
<h2><code>createPost</code></h2>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/tr0hh0rift9muttjo8cp.jpg" alt="14-3-api-src-services-posts-createPost"></p>
<h2><code>updatePost</code></h2>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/zj83x56uh09253wf2izk.jpg" alt="14-4-api-src-services-posts-updatePost"></p>
<h2><code>deletePost</code></h2>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/gjalgcswunobtewv317d.jpg" alt="14-5-api-src-services-posts-deletePost"></p>
<h1>4.6 <code>PostPage</code></h1>
<p><code>PostPage</code> is a component that takes in <code>PostCell</code> with a post's <code>id</code> as a prop. <code>PostCell</code> is wrapped in the <code>PostsLayout</code> component.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/28pioylp3oqk6no3s42c.jpg" alt="15-web-src-pages-PostPage"></p>
<p>Here's the view of <code>PostPage</code> with a <code>PostCell</code> wrapped in the <code>PostsLayout</code>:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ytvwsrqml2t7t6nqp6eo.jpg" alt="16-PostPage-rendered"></p>
<h1>4.7 <code>PostsLayout</code></h1>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/xumxuzi89chjjrb9tbvn.jpg" alt="17-layouts-PostsLayout"></p>
<p>If you click Posts you will be linked to <code>routes.posts()</code> and if you click New Post you will be linked to <code>routes.NewPost()</code></p>
<p>Here's the view of just the <code>PostsLayout</code>:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/h4kubdnasvfwtxce4p38.jpg" alt="18-PostsLayout-rendered"></p>
<h1>4.8 <code>PostCell</code></h1>
<p>Cells provide a simpler and more declarative approach to data fetching. When you create a cell you export several specially named constants and then Redwood takes it from there.</p>
<p>Cells should be used when your component needs some data from the database or other service that is delayed in responding. Redwood juggles what is displayed and when.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/zhdb77u4h5qzkpy4ghbv.jpg" alt="19-web-src-components-PostCell"></p>
<p>The minimum you need for a cell are the <code>QUERY</code> and <code>Success</code> exports.</p>
<ul>
<li>If you don't export an <code>Empty</code> component, empty results will be sent to your <code>Success</code> component.</li>
<li>If you don't provide a <code>Failure</code> component you'll get error output sent to the console.</li>
</ul>
<h1>4.9 <code>Post</code></h1>
<ul>
<li><a href="https://redwoodjs.com/docs/flash-messaging-bus.html#useflash-hook"><code>useFlash</code></a> is an abridgment of <code>React.useContext(FlashContext)</code>.</li>
<li><a href="https://www.apollographql.com/docs/react/data/mutations/"><code>useMutation</code></a> is a hook provided by Apollo which will allow us to execute the mutation when we're ready. It is the primary API for executing mutations in an Apollo application.</li>
</ul>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/6b8o02fiad235wki946j.jpg" alt="20-web-src-components-Post"></p>
<h2><code>DELETE_POST_MUTATION</code></h2>
<p>GraphQL string representing the mutation that is passed into <code>useMutation</code></p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/5h3ob2a6dj9u51j836pw.jpg" alt="21-web-src-components-Post-DELETE_POST_MUTATION"></p>
<h2><code>onCompleted</code></h2>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/efcnlcx4sy93met5vqly.jpg" alt="22-web-src-components-Post-onCompleted"></p>
<p>Displays a message letting you know the post has been deleted</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/o6fgt8algt5f2ochy79q.jpg" alt="22-1-web-src-components-Post-onCompleted-rendered"></p>
<h2><code>onDeleteClick</code></h2>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/tlur271kq4temva6o2ru.jpg" alt="23-web-src-components-Post-onDeleteClick"></p>
<p>Asks you to confirm that you are sure you want to delete the post, and gives the <code>id</code> of the post about to be deleted</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/5yxnc2r858800cf73y5n.jpg" alt="23-1-web-src-components-Post-onDeleteClick-rendered"></p>
<h1><code>rw-segment</code></h1>
<p>In the return statement of the <code>Post</code> component there is a <code>&lt;div&gt;</code> with the className <code>rw-segment</code> which takes the <code>post</code> object and pulls out the post's <code>id</code>, <code>title</code>, <code>body</code>, and <code>createdAt</code> date.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/uampof3jlrwtx4pgqdvq.jpg" alt="24-web-src-components-Post-rw-segment"></p>
<p>Here's the view in our application:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ocetrswbe7ih41x7pwud.jpg" alt="25-Post-rw-segment-rendered"></p>
<h1><code>rw-button-group</code></h1>
<p>This code corresponds to the edit and delete buttons.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/8s5309g282e1ar0pxulm.jpg" alt="26-web-src-components-Post-rw-button-group"></p>
<p>Here's the view in our application:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/p4kra1j13aojdsp53reb.jpg" alt="27-Post-rw-button-group-rendered"></p>
<p>Now if we look at the entire component we can see how <code>rw-segment</code> and <code>rw-button-group</code> are nested inside empty tags.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/mqshax5qboz32eaf0f6l.jpg" alt="28-web-src-components-Post-return"></p>
<p>Here's the view for the entire component.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/vkyu2uod0pufu5mcdf5f.jpg" alt="29-Post-return-rendered"></p>
<h1>4.10 <code>NewPostPage</code></h1>
<p><code>NewPostPage</code> is a component that takes in <code>NewPost</code> wrapped in the <code>PostsLayout</code> component. The same <code>PostsLayout</code> from <code>PostPage</code> is being reused here but with a different component nested inside.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/3d4iwj8nylkk0hgb5ckb.jpg" alt="30-web-src-pages-NewPostPage"></p>
<p>Here's the view:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/gn3ld4u3r3aeyutjvryx.jpg" alt="31-NewPostPage-rendered"></p>
<h1>4.11 <code>NewPost</code></h1>
<p><code>NewPost</code> is a component that takes in data from the <code>PostForm</code> component and uses <code>CREATE_POST_MUTATION</code> to save the post to the database.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/e8r7kn63op9wuvic3ewv.jpg" alt="32-web-src-components-NewPost"></p>
<p>Here's the view:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/l7mqsdjpj68lqaqtkqua.jpg" alt="33-new-post-form-rendered"></p>
<h1>4.12 <code>PostForm</code></h1>
<p>Redwood provides several helpers to make your life easier when working with forms. It is a wrapper around <a href="https://react-hook-form.com/">react-hook-form</a>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/63mf8q41ms8zmvmkdpg6.jpg" alt="34-src-components-PostForm"></p>
<h2><code>onSubmit</code></h2>
<p>A prop that accepts a function name or anonymous function to be called if validation is successful. Behind the scenes the handler given to <code>onSubmit</code> is given to react-hook-form's <a href="https://react-hook-form.com/api/#handleSubmit"><code>handleSubmit</code></a> function.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/pxb2jzewpip02t3892zg.jpg" alt="35-src-components-PostForm-onSubmit"></p>
<h2><code>&lt;Form&gt;</code></h2>
<p>Surrounds all form elements and provides contexts for errors and form submission.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/u9p64kiu714rywymuxfk.jpg" alt="36-src-components-PostForm"></p>
<h2><code>&lt;FormError&gt;</code></h2>
<p>Displays an error message, typically at the top of your form, containing error messages from the server</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/kopxz4rajuith88cvq7w.jpg" alt="37-src-components-PostForm-FormError"></p>
<h2><code>&lt;Label&gt;</code></h2>
<p>Used in place of the HTML <code>&lt;label&gt;</code> tag and can respond to errors with different styling</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/q2owaav8w3vdqup8pq4o.jpg" alt="38-src-components-PostForm-Title-Label"></p>
<h2><code>&lt;TextField&gt;</code></h2>
<p>Renders an HTML <input type="text"> field, but is registered with react-hook-form to provide some validation and error handling.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/yyiscrr4pk5zdtwl8ktw.jpg" alt="39-src-components-PostForm-Title-TextField"></p>
<h2><code>&lt;FieldError&gt;</code></h2>
<p>Displays form validation errors and server errors.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/9vrhbi9fb8p85th2yump.jpg" alt="40-src-components-PostForm-Title-FieldError"></p>
<p>Here's the view:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ei6pkhkp0ftu1nlomkxy.jpg" alt="41-Title-rendered"></p>
<p><code>&lt;Label&gt;</code>, <code>&lt;TextField&gt;</code>, and <code>&lt;FieldError&gt;</code> are also used for the Body.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/rvmxv1baq5toyi7ia4pg.jpg" alt="42-Body"></p>
<p>Here's the view:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/w3tkymddbblwioxawp4i.jpg" alt="43-Body-rendered"></p>
<h2><code>&lt;Submit&gt;</code></h2>
<p>Used in place of <code>&lt;button type=&quot;submit&quot;&gt;</code> and will trigger a validation check and &quot;submission&quot; of the form. It executes the function given to the <code>onSubmit</code> attribute on <code>&lt;Form&gt;</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/yftnmrnnvh7wu2w6smnx.jpg" alt="44-Save"></p>
<p>Here's the view:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/vjpc0o4riipmg0yr3pbm.jpg" alt="45-Save-rendered"></p>
<p>And here's the view of the entire <code>&lt;Form&gt;</code> component:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/3v46mdwsvorcd1gqosim.jpg" alt="46-PostForm-rendered"></p>
<h1>4.13 <code>EditPostPage</code></h1>
<p>Much like <code>PostPage</code>, <code>EditPostPage</code> is a component that takes in <code>EditPostCell</code> with a post's <code>id</code> as a prop. <code>EditPostCell</code> is wrapped in the <code>PostsLayout</code> component.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/wv7r7ll0k1vkx970m7d2.jpg" alt="47-web-src-pages-EditPostPage"></p>
<p>Here's the view:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/wmzu2lgzbv2aoatffa2o.jpg" alt="48-EditPostPage-rendered"></p>
<h1>4.14 <code>EditPostCell</code></h1>
<p>We have the <code>UPDATE_POST_MUTATION</code> and <code>QUERY</code> object types we discussed at the beginning of this article. At the bottom we are again returning the <code>&lt;PostForm&gt;</code> component except this time we also have a <code>post</code> prop to specify which post is being edited.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/vhut3tz01l71dl3jwn96.jpg" alt="49-web-src-components-EditPostCell"></p>
<p>Here's the view:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/qdiz1vubwwdf27ivtnif.jpg" alt="50-EditPostCell-rendered"></p>
<h1>4.15 <code>PostsPage</code></h1>
<p>In Redwood we use singular &quot;post&quot; when working with a single post object and the data associated with it. When we are working with many posts we use the plural &quot;posts.&quot; Here we are displaying all of our posts, so it's called <code>PostsPage</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/lnfmzpy7q4ukr3uoqgrx.jpg" alt="51-web-src-pages-PostsPage"></p>
<p>Here's the view:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/7wzcdzu69xwsgus2d1r2.jpg" alt="52-PostsPage-rendered"></p>
<h1>4.16 <code>PostsCell</code></h1>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/kjgnfqrdujdyrq3vuvj2.jpg" alt="53-web-src-components-PostsCell"></p>
<p>Here's the view if you have no posts:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/amyxsy9qenzoh3o2q8co.jpg" alt="54-posts-page"></p>
<h1>4.17 <code>Posts</code></h1>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/snm1sfn10k3zuvwi9nr2.jpg" alt="55-web-src-components-Posts"></p>
<p><code>truncate</code> limits the length of the posts being shown, and <code>timeTag</code> encapsulates the logic for created a timestamp for each post.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/juwt14splx7gtt33bkus.jpg" alt="56-web-src-components-Posts-PostsList"></p>
<p><code>onCompleted</code> and <code>onDeleteClick</code> are the same functions that we saw in the <code>NewPost</code> component.</p>
<h2><code>rw-table-wrapper-responsive</code></h2>
<p>We have a <code>div</code> that wraps one big table with the className <code>rw-table</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/8wzutcd2fkxjhp73quj6.jpg" alt="57-web-src-components-Posts-return"></p>
<p>Here's the view:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/o1f2pi8mxmzxmsj86hb7.jpg" alt="58-Posts-rw-table-wrapper-responsive-rendered"></p>
<p>This is a lot of code so we'll break this down to the table head and table body, and the table body is broken down into table posts and table actions.</p>
<ol>
<li>Table head (47-55)</li>
<li>Table body (56-91)</li>
<li>Table posts (57-62)</li>
<li>Table actions (63-88)</li>
</ol>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/8xgl6k2x92s2lstwdi3f.jpg" alt="59-Posts-rw-table-wrapper-responsive"></p>
<h2><code>&lt;thead&gt;</code></h2>
<p>The table head lets us know the different fields.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/lwnqvinu625el0rkjcb8.jpg" alt="60-Posts-thead"></p>
<p>Here's the view:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/glbmk5wznlufgel4t4z1.jpg" alt="61-Posts-thead-rendered"></p>
<h2><code>&lt;tbody&gt;</code></h2>
<p>In the first half of the table body we map over the data passed through the <code>post</code> prop, use the post's <code>id</code> for the <code>key</code> and then pull out the <code>id</code>, <code>title</code>, <code>body</code>, and <code>createdAt</code> time.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/i47ffyvrkd8ozjv162io.jpg" alt="62-Posts-td"></p>
<p>Here's the view:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/11wn58igymraxfee2li3.jpg" alt="63-Posts-td-rendered"></p>
<p>In the second half of the table body we have links to go to a post's page, edit a post, or delete a post.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/jz3rfn88x9igohxo412u.jpg" alt="64-Posts-rw-table-actions"></p>
<p>Here's the view:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/834jvs58ynt6vz1exwou.jpg" alt="65-Posts-rw-table-actions-rendered"></p>
<h1>4.18 <code>redwood generate cell</code></h1>
<p>Now we are going to create a cell that will render the most recent blog posts to the front page.</p>
<pre><code>yarn rw g cell BlogPosts
</code></pre>
<p>Redwood will generate a file called <code>BlogPostsCell.js</code> and a file for testing called <code>BlogPostsCell.test.js</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/2ica696wtl6kl0q04udn.jpg" alt="67-generating-cell-files"></p>
<p>This will generate a <code>QUERY</code> for us and use <code>JSON.stringify</code> to render the results of the query. But there is one thing we need to change.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/4xircas45g7ws73y4fp9.jpg" alt="68-web-src-components-BlogPostsCell"></p>
<p>We need to make a slight adjustment to get our QUERY to match up with the schema that we have already created. Change <code>blogPosts</code> on lines 3, 15, 16 to just <code>posts</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/phubewo9nep40b98v08s.jpg" alt="69-web-src-components-BlogPostsCell-posts-edit"></p>
<p>Now we can take the <code>BlogPostsCell</code> component and insert it into our <code>HomePage</code> component. We need to first import it, and then place the tag inside of the <code>BlogLayout</code> tags.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/joyk0mneceqc4qsn63dn.jpg" alt="70-BlogPostsCell-in-HomePage"></p>
<p>This gives us just the <code>id</code> and the <code>typename</code> which is <code>Post</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ysnrohoraf25ul47iw22.jpg" alt="71-BlogPostsCell-render-HomePage"></p>
<p>Lets go back to our <code>QUERY</code> and add in <code>title</code>, <code>body</code>, and <code>createdAt</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/r2gi8723ql9tjlgkxyro.jpg" alt="72-web-src-components-BlogPostsCell-id-title-body-createdAt"></p>
<p>Now we should get all the info we need on the home page.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/s7fsmj90nm6j0m0ir2h5.jpg" alt="73-BlogPostsCell-render-id-title-body-createdAt"></p>
<p>This doesn't look very good though, I don't think anyone would want to read this blog.</p>
<p>In the <code>BlogPostsCell</code> file inside <code>Success</code> we can create a component for our posts and give it a little structure.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/3kb5ndh5vxfaodu5kfv0.jpg" alt="74-BlogPostsCell-map-over-posts"></p>
<p>We'll do some more styling later on but for now we have our posts rendered to the front page.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/4nion84xg9lco3guqomu.jpg" alt="75-BlogPostsCell-render-map-over-posts"></p>
<p>In the <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-5-2ol4">next part</a> we'll create a contact form.</p>
<h1>Part 5 - Contact</h1>
<blockquote>
<p><em>We see it as a Rails replacement. Anything you would normally do with Rails we hope that you’ll be able to do with Redwood.</em><br>
<em><strong>Tom Preston-Werner - <a href="https://www.fullstackradio.com/episodes/138">Full Stack Radio 138</a></strong></em></p>
</blockquote>
<table>
<thead>
<tr>
<th>Introduction</th>
<th>Tutorial</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://dev.to/ajcwebdev/redwood-1d46">I - Redwood Philosophies</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-1017">Part 1 - Setup</a></td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/full-stack-react-1ihi">II - Full Stack React</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-2-44ph">Part 2 - Routes</a></td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/a-short-history-of-the-jamstack-3lk7">III - Jamstack</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-3-5ao5">Part 3 - Prisma</a></td>
</tr>
<tr>
<td><a href="https://ajcwebdev.substack.com/p/42-a-short-history-of-serverless">IV - Serverless</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-4-2m0g">Part 4 - CRUD</a></td>
</tr>
<tr>
<td></td>
<td>Part 5 - Contact</td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-6-a25">Part 6 - GraphQL</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-7-22b0">Part 7 - Deploy</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-8-3pjc">Part 8 - Auth</a></td>
</tr>
</tbody>
</table>
<p>If you've made it this far into my series of blog posts I commend you and hope you've found them useful.</p>
<p>In <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-1017">part 1</a> we created our RedwoodJS app, in <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-2-44ph">part 2</a> we created links between different pages and a reusable layout, in <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-3-5ao5">part 3</a> we got the database up and running and learned CRUD operations for our blog posts, and in <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-4-2m0g">part 4</a> we set up the frontend to query data from the backend to render a list of blog posts to the front page.</p>
<p>In this part we'll be combining everything we've learned up to this point to generate a contact page and take input from a user. We'll be using the same form tags that we learned about in part 4, which are wrappers around <a href="https://react-hook-form.com/get-started">react-hook-form</a>.</p>
<p>This is the simplest way to create a form, but Redwood can be used with other popular React form libraries like Formik or you can use react-hook-form directly.</p>
<p>Forms are a topic I'm particularly passionate about and believe receive far too little attention in bootcamp curriculums and online tutorials. They may not be the most exciting topic, but I encourage you to not gloss over these parts of the framework.</p>
<h1>5.1 <code>redwood generate page contact</code></h1>
<p>The first step is to enter the <code>yarn redwood generate page</code> command to create our contact page.</p>
<pre><code>yarn rw g page contact
</code></pre>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/efjyltt08jjalodfq1kv.jpg" alt="01-generating-page-files"></p>
<h1>5.2 <code>ContactPage</code></h1>
<p>This generates a folder called <code>ContactPage</code> in our <code>web/src/pages</code> folder, and creates two files, <code>ContactPage.js</code> and <code>ContactPage.test.js</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/heo7a47gpiox8pkszypt.jpg" alt="02-pages-folder"></p>
<p>This should look familiar if you've followed along with the whole series.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/lxdfrlp08qke7ksx2wua.jpg" alt="03-ContactPage"></p>
<p>Our <code>ContactPage</code> component contains the same boilerplate we saw when we created our home page and our about page.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/f2qxgmtl87yuiqyygk2z.jpg" alt="04-ContactPage-rendered"></p>
<p>Go to BlogLayout and add a link to the contact page.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ma0nxncbk22gverlbbje.jpg" alt="05-routes.contact"></p>
<p>Now we'll import <code>BlogLayout</code> into <code>ContactPage.js</code> and wrap our contact page content in the <code>BlogLayout</code> component.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/zpvr47pl8y461f0fkl7y.jpg" alt="06-ContactPage-BlogLayout"></p>
<p>We can now navigate to any of our three pages.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/p7numdwdrbi2go6kv2ju.jpg" alt="07-ContactPage-BlogLayout-rendered"></p>
<h1>5.3 <code>Form</code></h1>
<p>We're going to import the <code>Form</code> tags that we looked at in the previous section. Refer to <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-4-2m0g">part 4</a> or the <a href="https://redwoodjs.com/docs/form">Redwoodjs docs</a> to learn more about these tags.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/8lz54b0ty8f34c96fted.jpg" alt="08-ContactPage-Form-imports"></p>
<p>Now that we've imported the tags, create a <code>Form</code> with a <code>Label</code> and <code>TextField</code> for name, and a <code>Submit</code> button.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/nf45gocqrtbe3ddejsmc.jpg" alt="09-ContactPage-Form-Label-TextField-Submit"></p>
<p>Here is the label, input, and button.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ppovd1eq8kwkkwtj5oub.jpg" alt="10-ContactPage-Form-rendered"></p>
<p>We'll add a little CSS in a moment, but first see what happens if we try to input data.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/sp1be18nr9iwa82ggccn.jpg" alt="11-ContactPage-input"></p>
<p>If we click the save button we'll get an error.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/trce1ompqsf27c3vtcu1.jpg" alt="12-error-message"></p>
<p>This makes sense, we haven't told our form what to do yet with the data. Let's create a function called <code>onSubmit</code> that will take in a <code>data</code> object and console log the <code>data</code> object.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/6oic6aja5mw3mo9hrd8l.jpg" alt="13-ContactPage-onSubmit"></p>
<p>The <code>onSubmit</code> prop accepts a function name or anonymous function to be called if validation is successful. This function will be called with a single object containing key/value pairs of all Redwood form helper fields in your form.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/0oajg6c4yc14m9hf7y6s.jpg" alt="14-ContactPage-Form-onSubmit"></p>
<p>Now if enter data into the form and click save we'll see the following in our console:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/h1qrvfwyamgt0iopa81s.jpg" alt="15-console.log(data)"></p>
<h1>5.4 <code>data</code></h1>
<p>Our input is contained in the <code>data</code> object. Right now it only has a key/value pair for name but we'll be adding more in a moment.</p>
<p>Before doing that, what can we do with this <code>data</code> object?</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/fccxgw7plj9ayh7kwlqu.jpg" alt="16-ContactPage-onSubmit-data.name"></p>
<p>We can pull out the value of name by console logging <code>data.name</code>:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/osd91p0akqcwzss0adbi.jpg" alt="17-console.log(data.name)"></p>
<p>We want to be able to accept a longer message from our users, so we're going to import the <code>TextAreaField</code> tag.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/bxjbchhvok6ev3z7hnun.jpg" alt="18-ContactPage-TextAreaField-import"></p>
<p>We now how a <code>TextField</code> for name and email, and a <code>TextAreaField</code> for a message.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/pbgp8rlbbp74s4swtep1.jpg" alt="19-ContactPage-email-message"></p>
<p>To make this look a little nicer we're going to include just a little CSS.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/uwe7gw6m73e87x3j3xba.jpg" alt="20-index.css"></p>
<p>Our buttons, inputs, and labels are now <code>display: block</code> which adds a line break after any appearance of these tags, and the label also has a little bit of margin on the top.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/uel9h6fybf0atj6oraac.jpg" alt="21-ContactPage-email-message-rendered"></p>
<p>We'll test out all the fields:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/hkwqxkywjx0ff19o6onj.jpg" alt="22-ContactPage-email-message-input"></p>
<p>We now are getting back an object with three key/value pairs.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/39xsmt7mee7rxbd81xo2.jpg" alt="23-ContactPage-email-message-console.log"></p>
<p>We can console log any part of the object that we want.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/u9rel43i5oba9st2i1ch.jpg" alt="24-data.email-data.message"></p>
<p>Now if we look at our console we'll see each output and it even tells us which file and line corresponds to each piece of data.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ess2h63bpmrvb7g88mk7.jpg" alt="25-data.email-data.message-console.log"></p>
<h1>5.5 <code>validation</code></h1>
<p>What happens if we only fill out some of the form and try to submit?</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/g2m7m1si3o4szb7f8c3k.jpg" alt="26-just-name-input"></p>
<p>The form doesn't care, it simply takes the empty inputs and returns an empty string.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/yb6fweldvgf1oep19qth.jpg" alt="27-empty-email-message"></p>
<p>We want to add some validation so the user can't submit the form unless they've given input for all three fields.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/thrzvua73d8tpusegf1t.jpg" alt="28-errorClassName-validation"></p>
<h1>5.6 <code>errorClassName</code></h1>
<p>We gave each <code>TextField</code> an <code>errorClassName</code> with the attribute <code>error</code>. The <code>validation</code> prop accepts an object containing options for react-hook-form.</p>
<p>Right now we're just adding the <code>required</code> attribute, but later we'll use the <code>validation</code> prop for a regular expression.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/kxzghajegp77zgihm5w2.jpg" alt="29-input.error-textarea.error-label.error"></p>
<p>In our CSS we'll add the following properties for errors.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/89h31o7q5gznshyn9evc.jpg" alt="30-textfield-errors"></p>
<p>Now when we try to submit an empty field we see the color change to red.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/62498bbmd3l2pm755566.jpg" alt="31-textfield-errors-with-name"></p>
<p>Once we give input the red error color goes away.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/qcvdmkctrawzwdk3mce7.jpg" alt="32-invalid-email"></p>
<p>There's still an issue, which is we can submit an email that is invalid.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/vhufd6wnxfkqbeoboqec.jpg" alt="33-email-regex"></p>
<p>Here's a regular expression provided in the Redwood tutorial video. Don't ask me to explain it, cause I don't know what it's doing.</p>
<p>All I know is it does a thing with the <code>@</code> symbol, then it does another thing with the <code>.</code> symbol, then it does some other things and figures out if you gave an email or not. Google &quot;regex tutorials&quot; if that wasn't a satisfactory explanation for you.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/qbue5djgy4zkdh607c2g.jpg" alt="34-email-error"></p>
<h1>5.7 <code>FieldError</code></h1>
<p>Now we get an error if we don't provide a valid email address. It would really be nice if we could tell our user why they are getting an error.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/k1qri4wptsgkzec8nqt9.jpg" alt="35-import-FieldError"></p>
<p>We're going to import <code>FieldError</code> to show error messages to our users.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/z1jgch5tzcjkx936rm0t.jpg" alt="36-FieldError-name-email-message"></p>
<p>Now if we try to submit without giving input we are told that the field is required.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/id3eran7gi9oh9cvkvvj.jpg" alt="37-name-email-message-required"></p>
<p>If we enter an invalid email we are told that the email is not formatted correctly.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/deuyijhto9quyq4h6081.jpg" alt="38-email-formatted-incorrectly"></p>
<p>If we add the <code>errorClassName</code> to the <code>Label</code> tags we'll also turn the labels red if there's an error.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ni5hx5xfpb0v99l1sdyv.jpg" alt="39-label-errorClassName"></p>
<p>Now we have the label and the input field turn red if there's an error.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/nwejvnxof46j8hzo922x.jpg" alt="40-label-errors"></p>
<p>Might as well make everything red while we're at it.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/aukmo67p6tdj56ax21i1.jpg" alt="41-FieldError-style-red"></p>
<p>Since the <code>FieldError</code> will only show on errors we can just inline styles with <code>style=</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/gdiqd3h5abb2d7h5zz7i.jpg" alt="42-all-red"></p>
<p>Glorious red as far as the eye can see. Something's still not right though. &quot;Message is required&quot; should be on its own line.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/1akdzjrp4w4inkprrbiy.jpg" alt="43-message-error-display-block"></p>
<p>Adding <code>display: 'block'</code> will put the error on its own line.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/rpnvykfbmx2nn08nbblp.jpg" alt="44-message-error-display-block-rendered"></p>
<p>It would also be nice if we could tell the user a field is required before they hit the submit button. We'll do that by adding <code>mode: 'onBlur'</code> and pass that into <code>validation</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/8juv4snet5lcfjhvakk7.jpg" alt="45-form-validation-mode-onBlur"></p>
<p>Now when we enter a field and leave without filling it out we are immediately given feedback.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/4lbt7ci62w5js29g6hdr.jpg" alt="46-form-validation-mode-onBlur-rendered"></p>
<p>And for now that's our entire form. Here's a look at all the form code.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/1kay4suc8augz4a1ix84.jpg" alt="47-entire-form"></p>
<p>In the <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-6-a25">next part</a> we'll connect our contact form to our database so we can persistent the data entered into the form.</p>
<h1>Part 6 - GraphQL</h1>
<blockquote>
<p><em>GraphQL becomes the one and only mediator between your frontend and your backend.</em><br>
<em><strong>Tom Preston-Werner - <a href="https://www.softwaredaily.com/post/5ec7997912b353000c6381d8/RedwoodJS-with-Tom-PrestonWerner">RedwoodJS with Tom Preston-Werner</a></strong></em></p>
</blockquote>
<table>
<thead>
<tr>
<th>Introduction</th>
<th>Tutorial</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://dev.to/ajcwebdev/redwood-1d46">I - Redwood Philosophies</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-1017">Part 1 - Setup</a></td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/full-stack-react-1ihi">II - Full Stack React</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-2-44ph">Part 2 - Routes</a></td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/a-short-history-of-the-jamstack-3lk7">III - Jamstack</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-3-5ao5">Part 3 - Prisma</a></td>
</tr>
<tr>
<td><a href="https://ajcwebdev.substack.com/p/42-a-short-history-of-serverless">IV - Serverless</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-4-2m0g">Part 4 - CRUD</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-5-2ol4">Part 5 - Contact</a></td>
</tr>
<tr>
<td></td>
<td>Part 6 - GraphQL</td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-7-22b0">Part 7 - Deploy</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-8-3pjc">Part 8 - Auth</a></td>
</tr>
</tbody>
</table>
<p>In <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-5-2ol4">part 5</a> we generated a contact page and took input from the user. In this part we'll connect our contact form to our database so we can persist the data entered into the form.</p>
<h1>6.1 <code>Contact</code></h1>
<p>To modify our database we'll go to our <code>schema.prisma</code> file and add a <code>Contact</code> model.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/rik97onoi44q4khfy2im.jpg" alt="01-Contact-model"></p>
<p>The <a href="https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-schema/data-model">model</a> takes the <code>name</code>, <code>email</code>, and <code>message</code> strings from the form inputs. It creates an <code>id</code> with <code>autoincrement()</code> and <code>createdAt</code> time with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/now"><code>now()</code></a>.</p>
<p>Enter <code>yarn redwood db save</code> to create a migration schema.</p>
<pre><code>yarn rw db save
</code></pre>
<p>It will automatically assign your migration a name.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/u5azp2t2dnflvdso0iaw.jpg" alt="02-name-of-migration"></p>
<p>This will create another <code>migrations</code> directory with a schema file, README, and <code>steps.json</code> file like we saw in <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-3-5ao5">part 3</a>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/b3pyqs6hduccj5nosrf7.jpg" alt="03-migrate-save--name"></p>
<p>Enter <code>yarn redwood db up</code> to apply that migration to the database.</p>
<pre><code>yarn rw db up
</code></pre>
<p>This will output the database actions applied after the migration, which includes one <code>CreateTable</code> statement.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/nqe7nkgn0x8k9xf6qbl8.jpg" alt="04-migrate-up"></p>
<p>Lastly the <a href="https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-client">Prisma Client</a> is generated.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/cmgf9zzve0025xi50y24.jpg" alt="05-generate-Prisma-client"></p>
<h1>6.2 <code>redwood generate sdl</code></h1>
<p>Enter <code>yarn redwood generate sdl contact</code> to create the schema definition language for the contact form.</p>
<pre><code>yarn rw g sdl contact
</code></pre>
<p>This will create an sdl in your <code>graphql</code> folder and a resolver in your <code>services</code> folder.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ned1ofbjuk6o87xckqp8.jpg" alt="06-generating-SDL-files"></p>
<p>We created three files:</p>
<ul>
<li><code>contacts.sdl.js</code> in the <code>graphql</code> folder</li>
<li><code>contacts.js</code> in the <code>services/contacts</code> folder</li>
<li><code>contacts.test.js</code> in the <code>services/contacts</code> folder</li>
</ul>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/mtos8csbkgarchjy4nox.jpg" alt="07-api-src-folder"></p>
<h1>6.3 <code>contacts.sdl.js</code></h1>
<p>We'll look at our schema definition language first.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/rq4mhu4gvt4q1m306h55.jpg" alt="08-contacts.sdl.js"></p>
<p>The sdl has two types:</p>
<ul>
<li><code>Contact</code></li>
<li><code>Query</code></li>
</ul>
<p>And two inputs:</p>
<ul>
<li><code>CreateContactInput</code></li>
<li><code>UpdateContactInput</code></li>
</ul>
<h1>6.4 <code>createContact</code></h1>
<p>We need to create our own mutation. We don't get this by default because the sdl generator doesn't know what we plan to do with the schema.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/9vqfxkrqdhovhq4hxbrx.jpg" alt="09-type-Mutation"></p>
<p>Our <code>Mutation</code> type will be called <code>createContact</code>. The input is <code>CreateContactInput!</code> and it returns <code>Contact</code>.</p>
<h1>6.5 <code>contacts.js</code></h1>
<p>Now we'll look at our <code>contacts</code> service. It has a resolver for the <code>Query</code> type from our sdl.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/n84yisnvoec42ritha4x.jpg" alt="10-contacts.js"></p>
<p>We'll create a resolver for <code>createContact</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/6yxjn6pywwwxm9az20cv.jpg" alt="11-createContact-resolver"></p>
<p>This takes <code>input</code> from the browser and adds it to the database.</p>
<h1>6.6 <code>CREATE_CONTACT</code></h1>
<p>In our <code>ContactPage</code> file we'll add the mutation and assign it to <code>CREATE_CONTACT</code>. It is a common convention to use all caps for our mutations.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/9k08w198bmlof9j3zy8t.jpg" alt="12-CREATE_CONTACT-mutation"></p>
<p>We will just return the <code>id</code> since the user will not see this.</p>
<p>Make sure to import <code>useMutation</code> at the top of the file.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/hutydwj35iwe3m3xj3jw.jpg" alt="13-import-useMutation"></p>
<p>Inside the <code>ContactPage</code> component we'll call <code>useMutation()</code>. We pass an object <code>create</code> with variables that are defined in <code>CREATE_CONTACT</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/e4pnifj41gnufq56u9ue.jpg" alt="14-useMutation"></p>
<p>The input is the actual object containing the <code>data</code> which is assigned to <code>variables</code> and passed to the <code>create()</code> function inside <code>onSubmit</code>.</p>
<p>We are now ready to enter our data. Enter a name, email, and message and click the Save button.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/kjzs5a7m4e086ullmreo.jpg" alt="15-form-input"></p>
<p>Our form gives us the following object which we saw in the previous part.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/4z7jry0ch4sgdy5ibzn6.jpg" alt="16-form-input-console-log"></p>
<h1>6.7 <code>graphiQL</code></h1>
<p>We can now check to make sure it was saved. Remember all the way back in part 1 when we said there was something else running on <code>localhost:8911</code>?</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/1zhyxon1bkt73nyp26zr.jpg" alt="17-localhost-8911"></p>
<p>This is how we access the graphiQL interface. Click the graphql link.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/512op701y527bb8offur.jpg" alt="18-graphiQL"></p>
<p>GraphiQL is like an IDE for your GraphQL queries. On the left side you'll enter a query, and after clicking the middle play button the response will appear on the right side.</p>
<p>We'll create a <code>contact</code> query that will return all the <code>contacts</code> in the database.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/j7h868bqktmqm8x98lz8.jpg" alt="19-contact-query"></p>
<p>We'll ask for the <code>id</code>, <code>name</code>, <code>email</code>, and <code>message</code>.</p>
<p>Click the play button and on the right side you'll receive a <code>data</code> object containing whatever your entered into your form.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/pp55ohfrk4pdeir1aamf.jpg" alt="20-contact-data"></p>
<p>The <code>data</code> object contains a <code>contacts</code> array with objects containing the form input.</p>
<p>There's a few more things we can add to our form to make the user experience a little better.</p>
<ol>
<li>We want to give the user some immediate feedback after they click the save button.</li>
<li>We also want to put in safeguards in case the user feels like clicking the save button many times in fast succession.</li>
</ol>
<h1>6.8 <code>loading</code></h1>
<p>To do this we'll add a <code>loading</code> object after <code>create</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/whsrnlz3p0k50dtzhiqo.jpg" alt="21-loading"></p>
<p><code>loading</code> will be true while the mutation is being performed, and will change to false when the mutation is complete.</p>
<p>We will add <code>disabled</code> to the <code>Submit</code> button and pass it the <code>loading</code> object.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/1rnrjklfzzwhyquzwopj.jpg" alt="22-Submit-disabled-loading"></p>
<p>While the mutation is in progress disabled is true, and once it is complete it will change to false. To test this out go to your Network tab in your browsers devtools. Here we can simulate slow 3G.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/nj3ubs2v4ptbp6okikta.jpg" alt="23-slow-3G"></p>
<p>Enter some more data and click the Save button.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/xm2ykilh8nvwlcmlsqjr.jpg" alt="24-save-button-greyed-out"></p>
<p>Now when you click the Save button it will be greyed out for a moment while the input is saved to the database.</p>
<h1>6.9 <code>useForm</code></h1>
<p>Another problem with this form is the input sticks around on the page even after it is submitted. It would be better if we cleared the fields after submitting. We can do this by importing <code>useForm</code> from <code>react-hook-form</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/myz40eabl6v20wddq427.jpg" alt="25-import-useForm"></p>
<p>Inside our <code>ContactPage</code> component we'll create a <code>formMethods</code> variable and assign it the <code>useForm()</code> function that we just imported.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/uu2wnodut3xr0be84u1h.jpg" alt="26-formMethods"></p>
<p>Inside <code>&lt;Form&gt;</code> we'll add <code>formMethods</code> and pass it <code>formMethods</code> as a prop.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/unp5aapyrqcr6amiui1b.jpg" alt="27-Form-formMethods"></p>
<p>This gives us access to the reset function. In <code>useMutation</code> we'll add a second parameter, which is a callback called <code>onCompleted</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/jh8j06e9wzez42oxt9ai.jpg" alt="28-onCompleted"></p>
<p>When the mutation is complete we'll call <code>formMethods.reset()</code> and display an <code>alert()</code> saying <code>Thanks for telling me stuff about my things!</code> To test this in the browser, enter some more data and click the Save button.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ttuy2eu9b30735ggvyt7.jpg" alt="29-alert-thanks-for-the-message"></p>
<p>First the alert message appears on the screen. After clicking OK the form will be cleared.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/hl362fprnvvy4vp8qfco.jpg" alt="30-form-cleared"></p>
<p>Another thing we can improve is the label. Right now it is just defaulting to whatever is entered as the <code>name</code> attribute in <code>&lt;Label&gt;</code>. We can add a closing <code>&lt;/Label&gt;</code> tag and enter something between the tags to change the label. We'll capitalize the labels.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/hxmhd9cuhxywbz184xr3.jpg" alt="31-Name-label"></p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/pfnpwubw35jlkx2v7d7s.jpg" alt="32-Email-label"></p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/8huz2db0bq969ml62epm.jpg" alt="33-Message-label"></p>
<p>Check your form for the changes.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/gdahhgdkodvp3ct0oodl.jpg" alt="34-updated-form-labels"></p>
<p>In the <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-7-22b0">next part</a> we'll finally deploy our project to the internet with Netlify and Heroku.</p>
<h1>Part 7 - Deploy</h1>
<blockquote>
<p><em>RedwoodJS is an attempt to build a full stack framework for JavaScript and to really deploy it in a serverless way. So that’s one of the primary tenants that we have:</em></p>
<p><em>Build it end to end with JavaScript. Deploy it to a serverless environment to give you the advantages of the scale that that can bring as well as the global distribution that that can bring.</em><br>
<em><strong>Tom Preston-Werner - <a href="https://www.fullstackradio.com/episodes/138">Full Stack Radio 138</a></strong></em></p>
</blockquote>
<table>
<thead>
<tr>
<th>Introduction</th>
<th>Tutorial</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://dev.to/ajcwebdev/redwood-1d46">I - Redwood Philosophies</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-1017">Part 1 - Setup</a></td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/full-stack-react-1ihi">II - Full Stack React</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-2-44ph">Part 2 - Routes</a></td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/a-short-history-of-the-jamstack-3lk7">III - Jamstack</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-3-5ao5">Part 3 - Prisma</a></td>
</tr>
<tr>
<td><a href="https://ajcwebdev.substack.com/p/42-a-short-history-of-serverless">IV - Serverless</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-4-2m0g">Part 4 - CRUD</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-5-2ol4">Part 5 - Contact</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-6-a25">Part 6 - GraphQL</a></td>
</tr>
<tr>
<td></td>
<td>Part 7 - Deploy</td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-8-3pjc">Part 8 - Auth</a></td>
</tr>
</tbody>
</table>
<p>In this <a href="https://www.merriam-webster.com/dictionary/penultimate">penultimate</a> part we will:</p>
<ul>
<li>Deploy our frontend application with Serverless functions on Netlify</li>
<li>Deploy our backend to a hosted Postgres database on Heroku</li>
</ul>
<h1>7.1 GitHub Repo</h1>
<p>First you will need a GitHub repo with your Redwood project. Mine is <a href="https://github.com/ajcwebdev/ajcwebdev/">here</a>. It contains branches that match up with the state of the project at the end of each of the first six parts. The default branch is part7 and will be the branch we deploy.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ttr1wngw4q6j0ztrpmd7.jpg" alt="01-github-repo"></p>
<h1>7.2 Netlify</h1>
<pre><code class="language-bash">yarn rw g deploy netlify
</code></pre>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/f1rlw09ce8ka0g85nksf.jpg" alt="02-yarn-generate-deploy-netlify"></p>
<p>This creates a file at <code>/netlify.toml</code> containing the commands and file paths that Netlify needs to know about to build a Redwood app.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/bp995mogzb5expuhgsm9.jpg" alt="03-netlify.toml"></p>
<p>Next you'll need an account on <a href="http://netlify.com/">Netlify</a>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/0ae0i5yvfydgmlq2yg3g.jpg" alt="04-netlify-sites"></p>
<p>Click <code>New site from Git</code> to create a new site from git.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/k5va79ftlji8n8pgyqn3.jpg" alt="05-new-site-from-git"></p>
<p>You can also use GitLab or Bitbucket.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/hke4rkg7c25o0ylhqhu6.jpg" alt="06-create-a-new-site"></p>
<p>Enter the name of your repo into the search bar.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/gj0unavsfx7as0jh1iq2.jpg" alt="07-ajcwebdev-repo"></p>
<p>Select the repo.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/98n6n2564hlizskaqxwu.jpg" alt="08-ajcwebdev/ajcwebdev"></p>
<p>It selects the default branch to deploy.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/3idt3g6rvzspzvpx7z9g.jpg" alt="09-branch-to-deploy"></p>
<p>The build command may be entered by default.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/it7b79zxdyozz9slpqfe.jpg" alt="10-build-command"></p>
<p>If the build command is blank enter the following:</p>
<pre><code class="language-bash">yarn rw build &amp;&amp; yarn rw db up --no-db-client --auto-approve &amp;&amp; yarn rw dataMigrate up
</code></pre>
<p>Click <code>Deploy site</code> to deploy the site.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/up5prlddtk9iiarv40ij.jpg" alt="11-site-deploy-in-progress"></p>
<p>If we go to the <code>Deploys</code> section we can see more information about the build.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/51r5znou958rtvrnglck.jpg" alt="12-netlify-deploys"></p>
<p>Your build should take at least a minute or more, so don't freak out if it doesn't work immediately.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/6ovc5rl1dgistuphh93w.jpg" alt="13-deploy-published"></p>
<p>Our deploy took 2 minutes and 15 seconds and we can also see a summary of the deploy.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/tqf4gcnce5fr5vbw0j0x.jpg" alt="14-deploy-summary"></p>
<p>We haven't really deployed the site though, because right now we just have the frontend deployed to Netlify. But we haven't done anything with our database so we should expect an error:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/oqil2vvnzn2nffpf9ljw.jpg" alt="15-error-unexpected-token"></p>
<h1>7.3 Heroku</h1>
<p>To get our database online we'll need to set up another account and project on <a href="heroku.com">Heroku</a>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/2q0t1aqwqn6988wpkev2.jpg" alt="16-heroku-apps"></p>
<p>If this is your first project you can click the <code>Create new app</code> button in the middle to create a new app or you can click the <code>New</code> button on the top right.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/vw15vd439zqqtxp5jro6.jpg" alt="17-create-new-app"></p>
<p>We'll give the app the same name as the Github repo.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/rn0nb2tu3e2w6hn5oj9t.jpg" alt="18-app-name-ajcwebdev"></p>
<p>Now we have a dashboard for our project much like we did in Netlify.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/kcz8vpv2dubbdjbfe400.jpg" alt="19-heroku-deploy"></p>
<p>Lets take a look at our <code>Resources</code> tab so we can provision our database.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/bsspznyekikwp5ykb8va.jpg" alt="20-heroku-resources"></p>
<p>Click <code>Find more add-ons</code> to find more add-ons.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/iiloqno840koo34sh8vl.jpg" alt="21-find-more-add-ons"></p>
<p>There are many add-ons. We only need one, Heroku Postgres. Why Postgres? <a href="https://www.heavybit.com/library/podcasts/jamstack-radio/ep-35-graphql-querying-with-hasuras-tanmai-gopal/">Because Postgres is the best database; there is no other database</a>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/opa5syr4igu12lzybb7x.jpg" alt="22-heroku-postgres"></p>
<p>Click <code>Install Heroku Postgres</code> to install Heroku Postgres.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/iqkc8u5w9ku2l9h0zqyy.jpg" alt="23-install-heroku-postgres"></p>
<p>You can select your add-on plan, we'll be using the free option.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/jtc3jh4e44cbncuw2apu.jpg" alt="24-provision-add-on"></p>
<p>Enter the name of your heroku app and it should appear in the autocomplete.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/pnz7t87xknbmd2juxdb5.jpg" alt="25-app-to-provision-to"></p>
<p>Select your project and click <code>Provision add-on</code> to provision the add-on.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/trg087x8p3ap259mkpf1.jpg" alt="26-click-provision-add-on-button"></p>
<p>Now our database is installed.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/vq4q9dk3kddee29vii8m.jpg" alt="27-app-provisioned"></p>
<h1>7.4 Config/Environment Variables</h1>
<p>Lets go to the <code>Settings</code> tab so we can connect this database to our frontend. Click <code>Reveal Config Vars</code> to reveal the config variables.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/89eall7eshul9v3jpk51.jpg" alt="28-heroku-settings"></p>
<p>We can see a key/value pair for the database URL, normally it wouldn't be wise to share environment variables online, but this project is purely explanatory and won't be holding any sensitive data.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/h851tvjmkn1k8nuci0h8.jpg" alt="29-enter-config-vars"></p>
<p>Select the value and copy it to your clipboard. We'll be using this back in our Netlify project.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/tdbwdkrtuhovjv7j71qr.jpg" alt="30-copy-postgres-vars"></p>
<p>Select <code>Deploy settings</code> to go to your deploy settings.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/l7314ljzh8uf6u5vgt0o.jpg" alt="31-netlify-deploys"></p>
<p>Under <code>Build &amp; deploy</code> select <code>Environment</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/oencxni0wlxc7fzjj7pz.jpg" alt="32-environment-variables"></p>
<p>Click the <code>Edit variables</code> button to edit the variables.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/q0a0k2bapyqhzq6phdbq.jpg" alt="33-edit-variables"></p>
<p>We're going to use the key/value pair from our Heroku Postgres app.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/laxg642p28rty060zpjb.jpg" alt="34-set-environment-variables"></p>
<p>First enter <code>DATABASE_URL</code> for the key.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/4a1q892c8p33dd4384n1.jpg" alt="35-DATABASE_URL"></p>
<p>Then paste the value.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/6rp62306rnvvhm9m0glw.jpg" alt="36-paste-postgres-vars"></p>
<p>At the end of the value add <code>?connection_limit=1</code>. This makes sure that each AWS Lambda only opens one database connection.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/122c8k9jgxymmjas0wjr.jpg" alt="37-add-connection-limit"></p>
<p>We'll create one more variable.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/dw8kgm76770kozcl3i7n.jpg" alt="38-new-variable"></p>
<p>It will be called <code>BINARY_TARGET</code> with the value <code>rhel-openssl-1.0.x</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/i36b0ueh2ie3rnp2tq2t.jpg" alt="39-BINARY_TARGET"></p>
<p>This is a setting for Prisma which needs to know how to generate the client libraries to access the database. Usually it can auto detect that. However, in this case the libraries that are being built on Netlify are running on Ubuntu.</p>
<p>The API deployed to AWS Lambda is running a flavor of RedHat Enterprise Linux. We need to let Prisma know to build for RedHat and not for Ubuntu.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/wk7akue4m5mxm3a1l459.jpg" alt="40-save-variables"></p>
<p>If we go back to our code in <code>schema.prisma</code> we can see that we set our datasource to the environment variable <code>DATABASE_URL</code> and our client to <code>native</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/5fd9gf4ghozi5dwn657o.jpg" alt="41-schema-datasource-generator"></p>
<p>And then Prisma looks up our local environment file. We override these once you deploy to Netlify.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/h2wq6qmb1q7tdb88kb1b.jpg" alt="42-env.defaults"></p>
<p>Click the <code>Trigger deploy</code> button to trigger a deploy and select <code>Deploy site</code> to deploy the site.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/zytfidzhpakovjtb3c1p.jpg" alt="43-trigger-deploy"></p>
<p>You will now receive a great series of logs.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/z40cboxq13wp1mrp3fn1.jpg" alt="44-build-logs-1"></p>
<p>The logs will detail the build process.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/8yy4l7k14bufb3u4s7ig.jpg" alt="45-build-logs-2"></p>
<p>Do not concern yourself with the logs.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/eootzwb58yjda38pbike.jpg" alt="46-build-logs-3"></p>
<p>Let the logs wash over you and through you.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/prcyns2i2i2kbvmtu5wf.jpg" alt="47-build-logs-4"></p>
<p>Raft is a <a href="https://www.youtube.com/watch?v=w9GP7MNbaRc&amp;t=31m47s">bunch of logs that get you off Paxos island</a>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/la1l401gkdl7hjmq3h0l.jpg" alt="48-build-logs-5"></p>
<p>Now let's go back to our site.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/q1l566zivlxxzhm17k4k.jpg" alt="49-website-empty"></p>
<p>Lets create a new post.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/zyj83rse42utpkes6fdp.jpg" alt="50-posts"></p>
<p>Click the <code>NEW POST</code> button to make a new post. Enter a title and body.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/mvvxj6fakcacjpfxni42.jpg" alt="51-new-post"></p>
<p>Save the new post.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/39jf6jl3atvs4bkih0gq.jpg" alt="52-first-post-created"></p>
<p>Lets try to edit our new post.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/gnrv1fxfx8f75gcg5c4o.jpg" alt="53-first-post-edit"></p>
<p>Save your edit to the post.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/gumgl08iaq5b3ndae1rk.jpg" alt="54-first-post-edit-working"></p>
<p>It looks like it's working. Lets check the front page to make sure it's really working.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ebsgis2sngfwh7qoon6p.jpg" alt="55-front-page-working"></p>
<p>In the <a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-8-3pjc">next and final part</a> we'll add authentication to our application, something that has never confused any developer ever.</p>
<h1>Part 8 - Auth</h1>
<p>You made it to the last part!</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/jewl54ynr64v8hkfbugb.gif" alt="Alt Text"></p>
<p>Unfortunately I do not have any epic Tom quotes about authentication.</p>
<table>
<thead>
<tr>
<th>Introduction</th>
<th>Tutorial</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://dev.to/ajcwebdev/redwood-1d46">I - Redwood Philosophies</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-1017">Part 1 - Setup</a></td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/full-stack-react-1ihi">II - Full Stack React</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-2-44ph">Part 2 - Routes</a></td>
</tr>
<tr>
<td><a href="https://dev.to/ajcwebdev/a-short-history-of-the-jamstack-3lk7">III - Jamstack</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-3-5ao5">Part 3 - Prisma</a></td>
</tr>
<tr>
<td><a href="https://ajcwebdev.substack.com/p/42-a-short-history-of-serverless">IV - Serverless</a></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-4-2m0g">Part 4 - CRUD</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-5-2ol4">Part 5 - Contact</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-6-a25">Part 6 - GraphQL</a></td>
</tr>
<tr>
<td></td>
<td><a href="https://dev.to/ajcwebdev/a-first-look-at-redwood-js-part-7-22b0">Part 7 - Deploy</a></td>
</tr>
<tr>
<td></td>
<td>Part 8 - Auth</td>
</tr>
</tbody>
</table>
<p>We're going to implement a login form so no one can edit our blog willy-nilly. But before we do that let's give ourselves a custom domain. We can do this in our Settings on Netlify.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/k8b0eggbgpnnhxivsugr.jpg" alt="01-netlify-settings"></p>
<p>Go to Domain management and you should see a box for Custom domains.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/7p33rzro0uvqp1vdxyyq.jpg" alt="02-custom-domains"></p>
<p>Netlify assigns a random domain name by default but gives the option to edit it.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/pmiu3qoa77l36epvxnxp.jpg" alt="03-change-site-name"></p>
<p>I'll change my site name to <code>ajcwebdev-redwood</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/lyhldf9h1ugjwave5vx9.jpg" alt="04-ajcwebdev-redwood-netlify-app"></p>
<p>Click Save and it'll reflect your new site name.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/hdljrrgq5g7yre3a8wbd.jpg" alt="05-default-subdomain"></p>
<h1>8.1 Netlify Identity</h1>
<p>Now lets go to the Identity tab.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/qgg3ny0rgl7wsdp6818c.jpg" alt="06-netlify-identity"></p>
<p>Click <code>Enable Identity</code> to enable identity.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/fjgpii8n9mmvtsdp083n.jpg" alt="07-netlify-identity-level-0"></p>
<p>Here we can invite users to give them permissions. We are going to lock down our site and only give ourselves permission to see or edit anything. Click <code>Invite user</code> to invite a user.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/md0mzxm5jw9zrrtak2nu.jpg" alt="08-invite-users"></p>
<h1>8.2 <code>redwood generate auth</code></h1>
<p>We'll come back to that, but first we're going to learn one more <code>redwood generate</code> command, this time for authentication.</p>
<pre><code>yarn rw g auth netlify
</code></pre>
<p>I'm going to use Netlify but as of now we have the option to use:</p>
<ul>
<li><a href="https://docs.netlify.com/visitor-access/identity/">Netlify Identity</a></li>
<li><a href="https://auth0.com/">Auth0</a></li>
<li><a href="https://docs.magic.link/welcome">Magic Link</a></li>
</ul>
<p>This will create an <code>auth.js</code> file in <code>api/src/lib</code> and automatically modify our <code>index.js</code> file in <code>web/src</code> and our <code>graphql.js</code> file in <code>api/src/functions</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/53iq4s8z1n13y167i6kl.jpg" alt="10-redwood-genearte-auth-netlify-output"></p>
<p>If we check our <code>package.json</code> file in our <code>web</code> folder we'll see two new dependencies <code>@redwoodjs/auth</code> and <code>netlify-identity-widget</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/0lhp3g6agt8wkvpnrq3k.jpg" alt="11-dependencies-redwood-auth-netlify-identity-widget"></p>
<h1>8.3 <code>auth.js</code></h1>
<p>The <code>auth.js</code> file was generated in our <code>api/src</code> folder.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/y2ho6mvb8ijdwh6l6irp.jpg" alt="12-lib-auth.js"></p>
<p>Lets look at the generated file.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/5xnylp6avc3ve9ydtle0.jpg" alt="13-auth.js"></p>
<h1>8.4 <code>requireAuth</code></h1>
<p>We have a helper method <code>requireAuth</code> which we'll use in our services. If someone is not authenticated it will throw an error.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/7bguinfxurg6vyvobcu1.jpg" alt="14-index.js-netlify-identity"></p>
<h1>8.5 <code>AuthProvider</code></h1>
<p><code>AuthProvider</code> and <code>netlifyIdentity</code> are imported. Netlify identity is initialize with <code>netlifyIdentity.init()</code>. This will be unique to whatever provider you use.</p>
<p><code>AuthProvider</code> wraps the Router and takes in a <code>client</code> and <code>type</code> which are <code>netlifyIdentity</code> and <code>netlify</code> respectively.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/608jer42ndraueuxo785.jpg" alt="15-graphql.js-getCurrentUser"></p>
<p><code>getCurrentUser</code> is imported and passed to the <code>handler</code> that sets up our GraphQL so we don't have to worry about it.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/up1g48ccibsrt456oh04.jpg" alt="16-posts.js-import-requireAuth"></p>
<p>We'll import <code>requireAuth</code> and use it to restrict access to our endpoints.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/4qnfha11ikd42z8nxee3.jpg" alt="17-requireAuth()"></p>
<p>We want to restrict access to the sensitive endpoints including <code>createPost</code>, <code>updatePost</code>, and <code>deletePost</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/j5jayhvnq8ksx7oir0ps.jpg" alt="18-test-new-post"></p>
<p>Lets try to make a new post.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/0odsc2xc7ijj8xfumf3f.jpg" alt="19-don't-have-permission-to-make-new-post"></p>
<h1>8.6 <code>Private</code></h1>
<p>We are told that we don't have permission to do that. But we want to make it so an unauthenticated user can't even get this far. Let's create private routes for all the <code>/posts</code> routes.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ued4vdeue1rq3uftukga.jpg" alt="20-import-Private-from-router"></p>
<p>We'll import <code>Private</code> from <code>@redwoodjs/router</code> and use it to wrap our <code>/posts</code> routes.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/7i0ci5lvqk51fa102pii.jpg" alt="21-Private-routes-posts"></p>
<p>If we go back to the <code>new</code> route we'll now get an error message.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/5pcsziq7mn2875k4qam5.jpg" alt="22-something-went-wrong"></p>
<p>Instead of just showing an error message, we can redirect the user back to the home page by adding <code>unauthenticated=&quot;home&quot;</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/xs6yvks02mdszx3hck29.jpg" alt="23-Private-unauthenticated-home-redirect"></p>
<p>Now we'll see a redirect in the URL and we'll be taken back to the home</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/1lkg2p4flr14rj7odq7p.jpg" alt="25-redirect-to-home-page"></p>
<h1>8.7 <code>useAuth</code></h1>
<p>To implement authentication we'll start by importing <code>useAuth</code> from the Redwood <code>auth</code> package.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/cetywo5g3k016i22pxnq.jpg" alt="26-BlogLayout.js-import-useAuth-from-auth"></p>
<p>We'll use object destructuring to pull out the <code>logIn</code> object.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/3sy05ojscvheq11pd374.jpg" alt="27-logIn-destructuring-useAuth()"></p>
<p>We'll then add a link to Log In and pass the <code>logIn</code> object to the <code>onClick</code> event handler.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/5ahpwwnavbyzbexf9saz.jpg" alt="28-a-href-onClick-logIn"></p>
<p>If we return to our browser we'll now see a link to log in.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/t9bnxguhqw4fynl3bioh.jpg" alt="29-home-page-with-log-in-link"></p>
<p>If we click the link we'll get this fancy looking message from Netlify asking for our site's url.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/24kk3h89pbsjd4sgc4uf.jpg" alt="30-url-of-your-netlify-site"></p>
<p>Enter the domain that we created at the beginning of the article.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/3l2vn0vg40x4402vo6lm.jpg" alt="31-set-site's-url"></p>
<p>Now we have our log in forum.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/6inq8s5leaez9azgz3fa.jpg" alt="32-log-in-form"></p>
<p>You should have received an email to accept the invitation from Netlify.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/7dee7ylzvx3x8h5lygrl.jpg" alt="33-you've-been-invited-to-join"></p>
<p>If we follow the link to accept the invite we'll be taken to our live website and there will be an invite token in the URL.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/4ml9xjya2j25wew3qbkg.jpg" alt="34-deployed-site-invite-token"></p>
<p>Grab the <code>invite_token</code> starting with the <code>#</code> and copy-paste it over to your localhost.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/41pihd1ctwrmfspl763w.jpg" alt="35-localhost-invite-token"></p>
<p>You should now get a form to enter your password and complete your signup.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/1m84bslmfeyi3wm5tsgm.jpg" alt="36-complete-your-signup"></p>
<p>If you did everything correctly then you should see your blog posts again.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/cndoe6k1jv2m2s1kfad4.jpg" alt="38-protected-posts"></p>
<p>Now we want to add a link to our home page that we can use to log in and log out. We'll destructure two addition objects, <code>isAuthenticated</code> and <code>logOut</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/9jh5htvnio0ni9albagz.jpg" alt="39-isAuthenticated-logOut-destructuring-useAuth()"></p>
<p>We'll add another list them that uses a ternary operator to check whether we are authenticated and to display either Log Out or Log In depending on whether we are logged in or not.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/7q3xlfrq409dg84mftkq.jpg" alt="40-onClick-logIn"></p>
<p>Go back to your browser and since we are logged in you should see a link for Log Out.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/60ti579d6q9g04n8hj71.jpg" alt="41-home-page-log-out"></p>
<p>Now lets also add a ternary operator to the link itself so it knows to log out with we are currently logged in, and log in if we aren't currently logged in.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/z1o9pjd515d1ty4mpclo.jpg" alt="42-onClick-isAuthenticated"></p>
<p>If we click Log Out the page will refresh and the link will change to Log In.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/f6ye0seq296fp5zj0sfr.jpg" alt="43-home-page-log-in-link"></p>
<p>If we click Log In then we see our log in form again.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/cew9gsrpyjtoe0q4hamc.jpg" alt="44-log-in-form"></p>
<p>If we log in then the link will change back to Log Out.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/1uev1vu8zzpvybqdjxds.jpg" alt="45-home-page-log-out-link"></p>
<p>We'll destructure one more object called <code>currentUser</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/3kkefgm3i8iwi3w2cnke.jpg" alt="46-currentUser-destructuring-useAuth()"></p>
<p>We'll check to make sure we're authenticated and if so we'll show the current user's email with <code>currentUser.email</code>.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/v12fwzv6it6bm334urnk.jpg" alt="47-isAuthenticated-logged-in-as-currentUser.email"></p>
<p>If we now look back in our browser you should see a message saying you are logged in.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/0ydtnd7zzque5wvn2ryy.jpg" alt="48-logged-in-as"></p>
<p>And that's it! Right now you should either be feeling a great sense of accomplishment over building some amazing, or a horrible sinking feeling that you just wasted hours of your life building something useless. The choice is yours!</p>
